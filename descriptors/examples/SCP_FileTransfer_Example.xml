<?xml version="1.0" encoding="UTF-8"?>
<ProActiveDescriptor xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="http://www-sop.inria.fr/oasis/proactive/schema/DescriptorSchema.xsd">
	<variables>
		<descriptorVariable name="PROACTIVE_HOME" value="/home/user/ProActive"/> <!--CHANGE ME!!!! -->
	</variables>
    <componentDefinition>
        <virtualNodesDefinition>
            <virtualNode name="plugtest"/>
        </virtualNodesDefinition>
    </componentDefinition>
    <deployment>
        <mapping>
            <map virtualNode="plugtest">
                <jvmSet>
		    		<vmName value="JvmSSH"/>
                </jvmSet>
            </map>
        </mapping>
        <jvms>
            <jvm name="JvmSSH">
                <creation>
                    <processReference refid="sshProcess"/>
                </creation>
            </jvm>
        </jvms>
    </deployment>
	<fileTransferDefinitions>
		<fileTransfer id="ProActiveLite">
			<file src="TestFilename.txt"/>
			<dir src="ProActive"/>
		</fileTransfer>
	</fileTransferDefinitions>
    <infrastructure>
	<processes>
		<processDefinition id="jvmProcess">
                <jvmProcess class="org.objectweb.proactive.core.process.JVMNodeProcess">
                    <classpath>
			    <absolutePath value="${PROACTIVE_HOME}/lib/ProActive.jar"/>
			    <absolutePath value="${PROACTIVE_HOME}/lib/asm.jar"/>
			    <absolutePath value="${PROACTIVE_HOME}/lib/javassist.jar"/>
			    <absolutePath value="${PROACTIVE_HOME}/lib/bouncycastle.jar"/>
			    <absolutePath value="${PROACTIVE_HOME}/lib/componets/fractal.jar"/>
			    <absolutePath value="${PROACTIVE_HOME}/lib/log4j.jar"/>
			    <absolutePath value="${PROACTIVE_HOME}/lib/xercesImpl.jar"/>
			    <absolutePath value="${PROACTIVE_HOME}/lib/nqueen.jar"/>
			    <absolutePath value="${PROACTIVE_HOME}/lib/jsch.jar"/>
                    </classpath>
                    <javaPath>
                        <absolutePath value="/usr/java/bin/java"/>
                    </javaPath>
                    <policyFile>
			    <absolutePath value="${PROACTIVE_HOME}/scripts/proactive.java.policy"/>
                    </policyFile>
                    <log4jpropertiesFile>
			    <absolutePath value="${PROACTIVE_HOME}/scripts/proactive-log4j"/>
                    </log4jpropertiesFile>
                </jvmProcess>
		</processDefinition>
		<processDefinition id="sshProcess">
            <sshProcess class="org.objectweb.proactive.core.process.ssh.SSHProcess" hostname="localhost">
            	<processReference refid="jvmProcess"/>
				<fileTransferDeploy refid="ProActiveLite">
					<!-- scp is used to copy the files, one can still put scp, rcp,.... if the first protocol fails, the second one is tried and so on  -->
					<copyProtocol>scp</copyProtocol>
					<!-- following line also works since scp is the default protocol for ssh process-->
					<!--<copyProtocol>processDefault</copyProtocol>-->
					<sourceInfo prefix="/home1/plugtest"/>
					<destinationInfo prefix="/home2/plugtest"/>
				</fileTransferDeploy>
            </sshProcess>
		</processDefinition>
	  </processes>
    </infrastructure>
</ProActiveDescriptor>
