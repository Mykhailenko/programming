<?xml version="1.0" encoding="UTF-8"?>
<GCMDeployment
	xmlns="http://www-sop.inria.fr/oasis/ProActive/schemas/DeploymentDescriptorSchema"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://www-sop.inria.fr/oasis/ProActive/schemas/DeploymentDescriptorSchema ../schema/DeploymentDescriptorSchema.xsd">

	<environment>
		<!-- 
			Uniquement JavaPropertiesVariable et descriptorVariable
		-->
		<descriptorVariable name="foo" value="bar" />
		<javaPropertyVariable name="foo" value="bar" />
	</environment>

	<acquisition>
		<lookup type="HTTP" hostlist="host1 host2 host3" port="80" />
		<!-- type = RMI|IBIS|HTTP -->

		<p2p nodesAsked="12">
			<peerSet></peerSet>
		</p2p>

	</acquisition>

	<launch>

		<!-- Demarre deux JVMS sur la machine courante -->
		<application ref="PAJVM" />
		<application ref="PAJVM" />

		<!-- Demarre une JVM sur chaque machine du LAN -->
		<dispatcher ref="LAN_INRIA">
			<application ref="PAJVM" />
		</dispatcher>

		<!-- Demarre une JVM sur sea -->
		<bridge ref="GW_INRIA">
			<application ref="PAJVM" />
		</bridge>

		<!-- Demarre une JVM sur sea -->
		<bridge ref="GW_INRIA">
			<application ref="PAJVM" />
			<application ref="PAJVM" />
		</bridge>

		<!-- connexion a sea, puis lancement d'une JVM sur chaque machine du LAN -->
		<bridge ref="GW_INRIA">
			<dispatcher ref="LAN_INRIA">
				<application ref="PAJVM" />
			</dispatcher>
		</bridge>

		<!--  -->
		<bridge ref="sea" relay="PAJVM">
			<!-- Utilisation du scheduler local pour lancer une JVM sur X machine du cluster -->
			<dispatcher ref="grid5000">
				<application ref="PAJVM" />
			</dispatcher>
			
			<bridge ref="nef">
				<dispatcher ref="nef">
					<application ref="PAJVM" />
				</dispatcher>
			</bridge>
			<bridge ref="grid5000">
				<dispatcher ref="grid5000">
					<application ref="PAJVM" />
				</dispatcher>
			</bridge>
		</bridge>

	</launch>

	<infrastructure>

		<dispatchers>

			<ssh name="LAN_INRIA"
				hostList="cheypa duff schubby node-[000-100]" domain="inria.fr"
				username="cmathieu" commandPath="/usr/local/bin/ssh"
				jvmPerHost="2">
				<environment>
					<descriptorVariable name="" value="" />
				</environment>

			</ssh>

		</dispatchers>

		<bridges>

			<ssh name="GW_INRIA" hostname="sea" username="cmathieu"
				commandPath="/usr/bin/ssh" commandOptions="">
				<environment>
					<descriptorVariable name="" value="" />
				</environment>
				<privateKey>/home/cmathieu/.ssh/identity</privateKey>
			</ssh>

		</bridges>
	</infrastructure>
</GCMDeployment>